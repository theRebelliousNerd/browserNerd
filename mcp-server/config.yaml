# BrowserNERD MCP Server Configuration
# For MCP stdio integration with Claude Code

server:
  name: "browsernerd-mcp"
  version: "1.0.0"
  log_file: "C:\\CodeProjects\\SybioGenv3\\symbiogenBackEndV3\\dev_tools\\BrowserNERD\\mcp-server\\data\\browsernerd-mcp.log"

browser:
  # Launch Chrome only on demand (via MCP tool); set to true to auto-start at server boot
  auto_start: false

  # Run browser in headless mode (set to false to see the browser window)
  headless: false

  # Connect to Chrome with remote debugging enabled
  # If you prefer auto-launch, set debugger_url or launch. For on-demand, use launch and keep debugger_url empty.
  debugger_url: ""

  # Launch command for Chrome (used by launch-browser tool)
  # On Windows, Rod downloads Chromium to %APPDATA%\rod\browser\
  # On Linux/Mac, Rod downloads to ~/.rod/browser/
  launch:
    - "C:\\Users\\smoor\\AppData\\Roaming\\rod\\browser\\chromium-1321438\\chrome.exe"
    - "--remote-debugging-port=9224"
    - "--user-data-dir=C:\\temp\\chrome-debug"
    - "--no-first-run"
    - "--no-default-browser-check"
    - "--disable-background-networking"
    - "--disable-client-side-phishing-detection"
    - "--disable-default-apps"
    - "--disable-hang-monitor"
    - "--disable-popup-blocking"
    - "--disable-prompt-on-repost"
    - "--disable-sync"
    - "--disable-translate"
    - "--metrics-recording-only"
    - "--safebrowsing-disable-auto-update"

  # Timeouts
  default_navigation_timeout: "15s"
  default_attach_timeout: "10s"

  # Session persistence (absolute path for Claude Code compatibility)
  session_store: "C:\\CodeProjects\\SybioGenv3\\symbiogenBackEndV3\\dev_tools\\BrowserNERD\\mcp-server\\data\\sessions.json"

  # Enable DOM ingestion via JS snapshot (sampled to control memory)
  enable_dom_ingestion: true

  # Enable request/response header facts (can generate many facts)
  enable_header_ingestion: true

  # Event logging level (minimal | normal | verbose)
  # - minimal: Only console errors/warnings
  # - normal: All console + network + navigation events
  # - verbose: All events including DOM mutations
  event_logging_level: "normal"

  # Throttle high-frequency events (console/network/DOM) in milliseconds
  # 0 = no throttle (captures all events)
  # 100-200 recommended for production to prevent fact explosion
  event_throttle_ms: 100

mcp:
  # Use stdio (not SSE) for Claude Code integration
  # Set to a port number (e.g., 8080) to enable SSE HTTP transport
  sse_port: 0

mangle:
  # Enable Mangle causal reasoning engine
  enable: true

  # Path to Mangle schema with RCA rules (absolute path for Claude Code compatibility)
  schema_path: "C:\\CodeProjects\\SybioGenv3\\symbiogenBackEndV3\\dev_tools\\BrowserNERD\\mcp-server\\schemas\\browser.mg"

  # Fact buffer limit (circular buffer)
  # Higher values allow more historical context but use more memory
  fact_buffer_limit: 2048

  # Use built-in Mangle rules
  disable_builtin_rules: false
